addons:
  sauce_connect: true
  postgresql: '9.4'
  code_climate:
    repo_token:
      secure: fyC9vhT3NAoJM3yO3WgOStAwxLG7qYIk82KCACKls2nYPCaQTT6nE+gB/KNNqVeSUENr/MA7n4MTDckdz4b5mMUWsgRjGYD2yyCd53I0WNldxKAMhJSePqcA0O8iu442V/begQLUbP/Sl46fKt+hENCvVdRuLFdY0QN9Bim8wrIpTRlVGLdrtvpHz0SlYLl9Ag2k9UpcuxCbEAsFSLgv3wJcjGsWQrNzYHNaJZ+8l5doM5Z14nRDRk+BpOeswzjfyzz3zUPx22MGdOh9qdaCE3vsEphybflCNzI+c58qN+h0bo/xo05qmnfpXEhxqu646AIq56xc34PFl9sZyYsaYy5mFmwSrXxXkWxomZ+RiDKYMD2CTswYHlmRe5CPESbUVIc22hfJJw6wi9u3Fd55wacrPdmyRLutKdNocNDo/vsgnlG91d6bahseQ0rosd09exArl4Co0AeesRgt+9u2z5rBFnQXbIi7pEDO4yA1NIMNCZggZ8pAqBYtZ0ax/Hgz7TPzosj42RqAqyptYdhvqGj/Mfu7YwQUGSM8/LTBvaQfmHVXZIIfGHWSyUsLtpUAL2BP9cfmDjDsFSFX9XMp97oofBGmqiJAO/aFPiXPob8YWhUbwAzIna7zcIjVqaMEVZjgdz1pbPgJRU32GJYqTjQrbjQ8quXiZurwjFbh5KE=
language: ruby
cache: bundler
notifications:
  slack: excella-4th:D0zR7CRDJdhg07kKkO2Axq9Y
rvm:
- 2.2.2
branches:
  only:
  - master
before_script:
- rake db:create db:migrate
- rake db:create db:migrate RAILS_ENV=travis
script:
- bundle exec brakeman
- bundle exec rubocop -Dc .rubocop.yml
- RAILS_ENV=travis bundle exec rspec
- bundle exec rake teaspoon
- rake cucumber:non_exterior RAILS_ENV=travis secret_key_base=$SECRET_KEY_BASE
- rake cucumber:exterior_integration RAILS_ENV=travis secret_key_base=$SECRET_KEY_BASE
- export SAUCE_LABS=true
- rake cucumber:exterior_integration SAUCE_LABS=$SAUCE_LABS= RAILS_ENV=travis secret_key_base=$SECRET_KEY_BASE
deploy:
  provider: heroku
  run:
  - rake db:migrate
  - restart
  app:
    master: open-cabinet
  api_key:
    secure: Y92r08hX+/UQq0szjmiY6RXRiUU+Xq0NYLUlMRdd4K+yemFPQwwnr27EiaKASqh6npJoiyG+pzM/iZrJ/ofvaQHEnAeaVB3qy64HLQGXIVCng6g+frciYkR12gPuOsJ1EGwbXEtOQMPPpqN/ddZ8Q5yHmwJE5l2rJ40xLN1WT0vI3odA8VxfnuzSD+Q4BfrDYLOs7lVdMfW+XS4AaJ4/IYrpq26qjZ5/W6DSDQ+CSVT7a9xcQV0WFRjKyyxlRzMLaxMGLm4daA3CbLjXo9SKCEm1fHiY2P1gPewvefQc0QwcipDH/fuDf/hf3q7v0Niza7ClGrrrtGqsIVMg8dtUQpHji/C9CWm0qCZd+4bcd7uOiCTFy7wB/lqgVATG/Z7jhnq2UUtjszoPjrhIInr67KzFgAPp8NnVB5CcNx+tc3UWhnCyXifZpmw4UprZ4Uafg53cwpuBNPyBplrAuR/BY5PS4I4zXK+AF9Vuq5r3cFwU0ukM0EWelkdN+WW9TinUL/Ut3xi6WSehZSZRze/Ek3uJtcyclahX6BKk0WigJAQYoMtsDAmgPaO+wo97vi+3IPYr7igmnvzjxkvVJ8AbMTvKz4F1wacjsuN7yGZBOAUw+w6KrJu60aVOcYgwB86ZegT1L/WIVtuSZOu8bZUxiX4IYIFmNb5oQKib4LIJ86w=
env:
  global:
  - secure: lrLvNctdRYk+J7AaLqFkPSg5fNtt48+tzxk+3yS4a7NMHkRBm0IsuMvEcXw9Qg0bT5MheNOAwlcvY4Tgj6o/UtYtYfsHzy/kbtF0eAKDGpaHe4ksSbTIaxkpmlHn87aKkwv2+LV4FXH7vqsY9QIhX/rPU6P2NDMQogwQzcKJs1xad1OgYUmM+q+KqC31wRn9hlDpWJYNhpPxk2fYOYrBx+tYcuWyo+cL3bNp2LWQFuorFXsae+e6fH3JMd+1/bhvMxMoomnzzSErLRe6t0UfCGVbRrFj/dZKISyioRpgP1CsPHmNJA7WK4UcVjbcdVZMkvtASwb0yl0lhUBALlG9VPRXR4QyYpYpJMhT8iQOSVgNeRTy5e8JmnPVbxF4v45r3c7Jd0WpgNi7J3RslU2BXls8bbGeCRxpos7DXmT/s4zsXlnUPlbOLkwS9oxB4bJ0z66oHgKRSdp3oVrRi9eiUsIQWBsPwLcPAhfd3pP1+8yGVkZ25XJfVsrE+BFt+7W8gXtLrRHXKPik0+CFe2nlHZHSp5AbataMu1TS3AeFzGibVLG60ladt1mE15z5SVxCF2zXO2/M6aqSZS9je1fqvbVB5IlGRlDc+42K8c/6rVndC2f+79yDVQD+aj4idVHVsDwbJM57BG1s2n4BPk54pJhYVKqufBxSy+g6Nn3b2gM=
  - secure: dEg7r+OGJx0oOqcG6CMkE1vYmmYPSLOBvWk0dYSZupHwHHIIkN3d9bvnb1cgLju1DTqiswZLItK5lmWAj3UfTtWy34HpHJ5pyFFYwph2Wn6DRDMl1yCrrUYi1X1YLpjLwS4b3JLC1ZlOzf1dEg9A9Ny1MXomQG79ETEW/18sw8Kgno0wyh9HlJG6D6nWXFfVwLC1g0Q4e3hyAC4dNzGB7qZP4gYPJSJLJMUxXFyd1hYfCD7YedNKCxbqBzp+JilOEWa4fF6A8fp5GIPc/aU3sqrZj0Clu3LOSZbHMnzAsJvuOfrpgpGm6rL/6kmPqI+pnhS4gC28ghx6B4sK8VqbRMGdkEfrTmQp2UoONcAFTTrNySZ2o0QZmbOCdELeplAD60Ir4/8Kyfm8e2TTn8MwQ1lgATlOQzx3NVV2QY54mhvLNPlALLEfrNaBZ1hHMwWTkfieC89bByfsvwsH0K9SGUBVaU59gPZ2/bIUPoNWS5TG8NOlLGRvTLzsGc4eNZABMG4nYFn4rV1CtuQtIrxlpPvH/sZrahqOdW010bROk5MAgCzj68RwtTZzrRUR7cJrOCwaaTd/j8sptynh4gOmEAkWyrdnnn/+Hke6vxzFxxbYC3tc41YIgbsGUYWiOVcWu6ecKylBPmkqio4UspvTB7QKTWoJDMDYtlWjYtTYfOU=
